---
Title: "Thesis"
author:
  - name: Valentin Kriegmair
    affiliations: "Humboldt-UniversitÃ¤t zu Berlin"
fig-cap-location: top
format:
    pdf:
        fig-numbering: false
        fontsize: 11pt
        linestretch: 1.5
        geometry: "left=25mm, right=20mm, top=20mm, bottom=20mm"
        classoption: oneside
        papersize: a4
        header-includes: |
          \usepackage{pdfpages}  
          \usepackage{hyperref}
          \newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
          \usepackage{array}
          \usepackage{float}
          \floatplacement{table}{H}
          \usepackage{tikz}
          \usetikzlibrary{arrows.meta, positioning, calc}
          \usepackage{caption}
          \captionsetup{justification=raggedright, singlelinecheck=false, parskip=0pt}
          \usepackage{pdflscape}
          \usepackage{afterpage}
          \usepackage{lscape}
          \DeclareCaptionFormat{APAfigure}{\raggedright\textbf{Figure~\thefigure}\\[1.5\baselineskip]\textit{#3}}
          \captionsetup[figure]{format=APAfigure, labelsep=none, justification=raggedright}
          \newcommand{\blandscape}{\begin{landscape}}
          \newcommand{\elandscape}{\end{landscape}}
          \newenvironment{fignote}{\par\vspace{\baselineskip}\small\textit{Note.}\space}{}
          \usepackage{longtable}
          \DeclareCaptionFormat{APAlongtable}{\textbf{Table~\thetable}\\[1.5\baselineskip]\textit{#3}}
          \setlength{\LTpre}{0pt}
          \captionsetup[table]{
                  format=plain,
                  justification=raggedright,
                  singlelinecheck=false,
                  labelfont=bf,
                  labelsep=none,
                  skip=0pt}
          \captionsetup[longtable]{
                  format=APAlongtable,
                  labelformat=empty,
                  justification=raggedright,
                  singlelinecheck=false,
                  skip=0pt}
          \setlength{\LTpre}{0pt}
          \setlength{\LTpost}{0pt}

          % APA7 headers:
          \usepackage{setspace}  % Package to handle line spacing
          \usepackage{indentfirst}  % Indent the first paragraph after a heading

          % Define paragraph indent and spacing
          \setlength{\parindent}{1.27cm}  % 0.5-inch paragraph indent for new paragraphs
          \setlength{\parskip}{0pt}  % No additional spacing between paragraphs

          % Double spacing for headings and text
          \linespread{2.0}  % Set line spacing to double (2.0)

          % KOMA-Script for headings
          \RedeclareSectionCommand[
            beforeskip=1\baselineskip,  % Add spacing before the heading
            afterskip=1\baselineskip,  % Add spacing after the heading
            font=\normalfont\bfseries\centering
          ]{section}

          \RedeclareSectionCommand[
            beforeskip=1\baselineskip,
            afterskip=1\baselineskip,
            font=\normalfont\bfseries\flushleft
          ]{subsection}

          \RedeclareSectionCommand[
            beforeskip=0.5\baselineskip,
            afterskip=0.5\baselineskip,
            font=\normalfont\bfseries\itshape\flushleft
          ]{subsubsection}

          \RedeclareSectionCommand[
            beforeskip=0.5\baselineskip,
            afterskip=0.5\baselineskip,
            indent=\parindent,
            font=\normalfont\bfseries,
            runin=true  % Run-in heading with the paragraph
          ]{paragraph}

          \RedeclareSectionCommand[
            beforeskip=0.5\baselineskip,
            afterskip=0.5\baselineskip,
            indent=\parindent,
            font=\normalfont\bfseries\itshape,
            runin=true  % Run-in heading with the paragraph
          ]{subparagraph}
fontsize: 11pt
engine: knitr
bibliography: ../bibliography.bib
csl: ../apa.csl
appendix: true
---
```{r, include=FALSE}
library(git2r)
library(knitr)
knitr::opts_chunk$set(message = FALSE, warning = FALSE, echo = FALSE)
```

\includepdf{cover.pdf}

\begin{center} \section*{Abstract} \end{center}

\noindent
{{< include abstract.qmd >}}

\newpage

\newpage
\tableofcontents
\newpage

# Introduction

# Methods

## A Framework for Adversarial Collaboration

## Methods of Individual Simulation Studies

### Studies by Kriegmair

{{< include methods.qmd >}}

### Studies by Kosanke

```{r}
# Load required library
library(git2r)

# Get the repository path and extract commit details
repo_path <- "../../LK"  # Replace with your repository path
repo <- repository(repo_path)
latest_commit <- commits(repo)[[1]]  # Retrieves the most recent commit
commit_sha <- sha(latest_commit)
github_repo <- "https://github.com/yourusername/yourrepository"  # Replace with your repo link
file_path <- "LK/thesis.qmd"  # Adjust file path if necessary
link_to_document <- paste0(github_repo, "/blob/", commit_sha, "/", file_path)

```

```{r}
input_file <- knitr::current_input()
input_path <- normalizePath(input_file)
input_dir <- dirname(input_path)

repo_path <- normalizePath(file.path(input_dir, "..", "..", "LK"))

repo <- repository(repo_path)
latest_commit <- commits(repo)[[1]]

commit_sha_full <- sha(latest_commit)
commit_sha_short <- substr(commit_sha_full, 1, 7)

```
```{r, results = 'asis'}
# Display the SHA without a link
# Display the document version with proper formatting
cat("#### Quoted verbatim from Kosanke's report\n")
cat(paste0("\\textit{(Version identified by Git commit SHA: ", commit_sha_short, "):}\n\n"))
```


```{r, results = 'asis'}
lines <- readLines("../../LK/thesis.qmd")


methods_headings <- grep("^### Methods", lines)
results_headings <- grep("^### Results", lines)

# Define the start and end positions for extracting content
start <- methods_headings[2] + 1  # Skip the "### Methods" line itself by adding 1
end <- results_headings[2] - 1    # Exclude the "### Results" header

extracted_lines <- lines[(start):(end-1)]

table_placeholder <- grep("\\*\\*Table 7\\*\\*", extracted_lines)

before_table <- extracted_lines[1:(table_placeholder - 1)]
after_table <- extracted_lines[(table_placeholder + 1):length(extracted_lines)]

before_table <- before_table[!grepl("Overview of the individual simulation studies by Leonard Kosanke.", before_table)]
before_table <- before_table[!grepl("\\*\\*Table 7\\*\\*", before_table)]

cat(paste(before_table, collapse = "\n"))
```


:::{fig-kosanke-studies}

```{r fig.cap="Overview of Simulation Studies Conducted by Kosanke\\label{tbl:studies-kosanke}", echo=FALSE, out.width="100%"}
knitr::include_graphics("../../LK/images/TableOverviewIndividualStudies.pdf")
```

\raggedright \textit{Note.} $\Phi$: factor correlation, N: sample size, $\lambda$: factor loading, $\sigma$: residual variance, $\tau$: factor variance, RC: residual correlations, CL: cross-loadings, CFA: confirmatory factor analysis, $\beta$: regression coefficient between factors.

:::

```{r, results = 'asis'}
after_table <- after_table[!grepl("\\{r|knitr::include_graphics|```", after_table)]
after_table <- after_table[!grepl("Overview of the individual simulation studies by Leonard Kosanke.", after_table)]
cat(paste(after_table, collapse = "\n"))
```

## Methods of "Joint" Simulation Study

{{< include methods_joint.qmd >}}

# Results

## Results of Individual Simulation Studies

### Results of Kriegmair's Simulation Studies

{{< include results.qmd >}}

### Results of Kosanke's Simulation Studies

```{r}
# Read the results section from Kosanke
lines <- readLines("../../LK/thesis.qmd")


```

## Results of the "Joint" Simulation Study

## Results of the Adversarial Collaboration

# Discussion

## Discussing the substanital results

## Disucssing the Adversarial Collaboration

Idea: living simulations

# References

:::{#refs}

:::

# Appendix A: Simulation Protocol

{{< include appendix_a.qmd >}}

# Appendix B: Supplementary Figures

\renewcommand{\thefigure}{A\arabic{figure}}
\setcounter{figure}{0}

{{< include appendix_b.qmd >}}

# Appendix C: Detailed Error and Warning Messages

\renewcommand{\thetable}{C\arabic{table}}
\setcounter{table}{0}

In the following, all different warning and error messages raised during the studies are listed (see Table C1) and shown how often they occurred under various fitting conditions (see Table C2).

{{< include appendix_c.qmd >}}